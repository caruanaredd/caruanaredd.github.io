"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3262],{1006:(w,Z,l)=>{l.d(Z,{G:()=>E});var s=l(2096),m=l(5966),u=l(546),e=l(6888),o=l(9808);function C(g,d){1&g&&s._UZ(0,"map-marker",3),2&g&&s.Q6J("position",d.$implicit)}function v(g,d){if(1&g&&(s.TgZ(0,"div"),s.YNc(1,C,1,1,"map-marker",2),s.qZA()),2&g){const a=s.oxw();s.xp6(1),s.Q6J("ngForOf",a.markerPosition)}}let E=(()=>{class g{constructor(a,p){this.route=a,this.ensembleService=p,this.chosenLocation=new s.vpe,this.gestureHandling="",this.options={}}ngOnInit(){this.gestureHandling=this.writeMap?void 0:"none",console.log("wripte map: ",this.writeMap),this.selectedEvent=void 0,this.setMap()}mapClick(a){a=a.latLng.toJSON(),this.writeMap&&(this.chosenLat=a.lat,this.chosenLng=a.lng,this.markerPosition=[{lat:this.chosenLat,lng:this.chosenLng}],this.chosenLocation.emit({lat:this.chosenLat,lng:this.chosenLng}))}setMap(){if(this.chosenLng=14.507898,this.chosenLat=35.89545,this.writeMap)this.markerPosition=[{lat:this.chosenLat,lng:this.chosenLng}],this.options=Object.assign(Object.assign({},this.options),{gestureHandling:this.gestureHandling,center:{lat:this.chosenLat,lng:this.chosenLng}}),console.log("options: ",this.options);else{if(console.log("route is: "+this.route),this.eventID=parseInt(this.route.snapshot.params.eventId),this.selectedEvent=this.ensembleService.getEventByID(this.eventID),console.log("Event ID: "+this.eventID),console.log("selected event: ",this.selectedEvent),void 0===this.selectedEvent)return void console.log("Event not found!");this.markerPosition=[{lat:this.selectedEvent.location.lat,lng:this.selectedEvent.location.lng}],this.options=Object.assign(Object.assign({},this.options),{gestureHandling:this.gestureHandling,center:{lat:this.selectedEvent.location.lat,lng:this.selectedEvent.location.lng}}),console.log("marker pos, ",this.markerPosition)}this.chosenLocation.emit({lat:this.chosenLat,lng:this.chosenLng})}}return g.\u0275fac=function(a){return new(a||g)(s.Y36(m.gz),s.Y36(u.Z))},g.\u0275cmp=s.Xpm({type:g,selectors:[["app-map"]],inputs:{writeMap:"writeMap"},outputs:{chosenLocation:"chosenLocation"},decls:2,vars:2,consts:[["width"," 100%",3,"options","mapClick"],[4,"ngIf"],[3,"position",4,"ngFor","ngForOf"],[3,"position"]],template:function(a,p){1&a&&(s.TgZ(0,"google-map",0),s.NdJ("mapClick",function(f){return p.mapClick(f)}),s.YNc(1,v,2,1,"div",1),s.qZA()),2&a&&(s.Q6J("options",p.options),s.xp6(1),s.Q6J("ngIf",p.markerPosition))},directives:[e.b6,o.O5,o.sg,e.O_],styles:[""]}),g})()},3262:(w,Z,l)=>{l.d(Z,{s:()=>b});var s=l(655),m=l(162),u=l(2993),e=l(2096),o=l(2974),C=l(546),v=l(4182),E=l(9808),g=l(1006),d=l(5966);function a(i,h){if(1&i&&(e.TgZ(0,"ion-select-option",27),e._uU(1),e.qZA()),2&i){const n=h.$implicit;e.s9C("value",n.id),e.xp6(1),e.Oqu(n.name)}}function p(i,h){if(1&i){const n=e.EpF();e.TgZ(0,"ion-col",10)(1,"ion-item")(2,"ion-label",13),e._uU(3,"Ensemble"),e.qZA(),e.TgZ(4,"ion-select",15),e.NdJ("ngModelChange",function(r){return e.CHM(n),e.oxw().newEvent.ensembleID=r}),e.TgZ(5,"ion-select-option",25),e._uU(6,"Personal"),e.qZA(),e.YNc(7,a,2,2,"ion-select-option",26),e.qZA()()()}if(2&i){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.newEvent.ensembleID),e.xp6(3),e.Q6J("ngForOf",n.ensembleService.ensemble)}}const M=function(i){return["/score-detail/",i]};function f(i,h){if(1&i){const n=e.EpF();e.TgZ(0,"ion-item-sliding",32)(1,"ion-item")(2,"ion-card",33)(3,"ion-card-content")(4,"ion-grid")(5,"ion-row")(6,"ion-col",11)(7,"h1"),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",30)(10,"h3"),e._uU(11),e.qZA()(),e.TgZ(12,"ion-col",30)(13,"h3"),e._uU(14),e.qZA()(),e.TgZ(15,"ion-col",30)(16,"ion-checkbox",34),e.NdJ("ionChange",function(r){const c=e.CHM(n).$implicit;return e.oxw(2).checkBoxChange(r,c.id)}),e.qZA()()()()()()(),e.TgZ(17,"ion-item-options")(18,"ion-item-option"),e._UZ(19,"ion-icon",35),e.qZA()()()}if(2&i){const n=h.$implicit;e.Q6J("routerLink",e.VKq(4,M,n.id)),e.xp6(8),e.Oqu(n.name),e.xp6(3),e.Oqu(n.composer),e.xp6(3),e.Oqu(n.instruments)}}function T(i,h){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-list",28)(2,"ion-item",29)(3,"ion-grid")(4,"ion-row")(5,"ion-col",11)(6,"h6"),e._uU(7,"Piece Title"),e.qZA()(),e.TgZ(8,"ion-col",30)(9,"h6"),e._uU(10,"Composer"),e.qZA()(),e.TgZ(11,"ion-col",30)(12,"h6"),e._uU(13,"Instrumentation"),e.qZA()()()()(),e.YNc(14,f,20,6,"ion-item-sliding",31),e.qZA()()),2&i){const n=e.oxw();e.xp6(14),e.Q6J("ngForOf",n.ensembleService.getScoresByEnsembleID(n.ensembleID))}}function O(i,h){if(1&i){const n=e.EpF();e.TgZ(0,"ion-item-sliding")(1,"ion-item")(2,"ion-card",33)(3,"ion-card-content")(4,"ion-grid")(5,"ion-row")(6,"ion-col",11)(7,"h1"),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",30)(10,"h3"),e._uU(11),e.qZA()(),e.TgZ(12,"ion-col",30)(13,"h3"),e._uU(14),e.qZA()(),e.TgZ(15,"ion-col",30)(16,"ion-checkbox",34),e.NdJ("ionChange",function(r){const c=e.CHM(n).$implicit;return e.oxw(2).checkBoxChange(r,c.id)}),e.qZA()()()()()()(),e.TgZ(17,"ion-item-options")(18,"ion-item-option"),e._UZ(19,"ion-icon",35),e.qZA()()()}if(2&i){const n=h.$implicit;e.xp6(8),e.Oqu(n.name),e.xp6(3),e.Oqu(n.composer),e.xp6(3),e.Oqu(n.instruments)}}function A(i,h){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-list",28)(2,"ion-item",29)(3,"ion-grid")(4,"ion-row")(5,"ion-col",11)(6,"h6"),e._uU(7,"Piece Title"),e.qZA()(),e.TgZ(8,"ion-col",30)(9,"h6"),e._uU(10,"Composer"),e.qZA()(),e.TgZ(11,"ion-col",30)(12,"h6"),e._uU(13,"Instrumentation"),e.qZA()()()()(),e.YNc(14,O,20,3,"ion-item-sliding",36),e.qZA()()),2&i){const n=e.oxw();e.xp6(14),e.Q6J("ngForOf",n.ensembleService.getScoresByEnsembleID(void 0))}}let b=(()=>{class i{constructor(n,t,r){this.ModalCtrl=n,this.alertController=t,this.ensembleService=r,this.newEvent={id:0,name:"",ensembleID:0,scores:[],description:"",type:"",date:"",time:""},this.dateValue=(0,m.Z)(new Date,"yyyy-MM-dd")+"T09:00:00.000Z",this.todaysDate="",this.selectedDate="",this.currentYear=(new Date).getFullYear(),this.imageBase64="",this.imageSource="",this.setToday()}ngOnInit(){this.hasEnsemble&&(this.newEvent.ensembleID=this.ensembleID,console.log("ensemble ID: ",this.ensembleID)),this.eventCount=this.ensembleService.getEventsLength(),this.newEvent.id=this.eventCount+1,this.hasEnsemble&&(this.ensembleName=this.ensembleService.getEnsembleByID(this.ensembleID).name)}setToday(){this.todaysDate=(0,m.Z)((0,u.Z)((0,m.Z)(new Date,"yyyy-MM-dd")),"dd MMMM yyyy"),this.selectedDate=this.todaysDate}dateChanged(n){this.dateValue=n,this.selectedDate=(0,m.Z)((0,u.Z)(n),"dd MMMM yyyy"),this.newEvent.date=(0,m.Z)((0,u.Z)(n),"yyyy-MM-dd"),this.newEvent.time=(0,m.Z)((0,u.Z)(n),"HH:mm:ss")}handleFileSelect(n){var t=n.target.files,r=t[0];if(t&&r){var _=new FileReader;_.onload=this._handleReaderLoaded.bind(this),_.readAsBinaryString(r)}}_handleReaderLoaded(n){this.imageBase64=btoa(n.target.result),this.imageSource="data:image/jpeg;base64,"+this.imageBase64}checkBoxChange(n,t){if(console.log("checkbox change: ",n.currentTarget.checked),n.currentTarget.checked)this.newEvent.scores.push(t);else for(var r=0;r<this.newEvent.scores.length;r++)this.newEvent.scores[r]===t&&this.newEvent.scores.splice(r,1);console.log("lenght: ",this.newEvent.scores.length),console.log("new event program: ",this.newEvent.scores)}handleButtonClick(){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.alertController.create({cssClass:"alert",header:"Delete Event",subHeader:"Information will be lost",message:"You cannot undo this action",buttons:[{text:"Yes",handler:()=>{this.close()}},{text:"No"}]})).present()})}close(){return(0,s.mG)(this,void 0,void 0,function*(){yield this.ModalCtrl.dismiss()})}getLocation(n){this.chosenLocation=n}save(){return(0,s.mG)(this,void 0,void 0,function*(){this.hasEnsemble||(this.newEvent.ensembleID=void 0),null!=this.newEvent.image&&(this.newEvent.image=this.imageSource),this.newEvent.location=this.chosenLocation,this.ensembleService.saveEvent("Events",this.newEvent),this.newEvent={id:0,name:"",ensembleID:this.ensembleID,scores:[],description:"",type:"",date:"",time:""},this.close()})}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(o.IN),e.Y36(o.Br),e.Y36(C.Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-new-event"]],inputs:{ensembleID:"ensembleID",eventCount:"eventCount",hasEnsemble:"hasEnsemble"},decls:79,vars:12,consts:[["color","light"],["slot","end","fill","clear",3,"click"],["slot","icon-only","name","close"],[3,"fullscreen"],[1,"eventFields"],[1,"newEventSection"],["size","8"],["type","file",1,"file-input",3,"change"],["size","4"],["alt","",3,"src"],["size","12"],["size","6"],["fill","solid"],["position","floating"],["clearInput","",3,"ngModel","ngModelChange"],["interface","popover",3,"ngModel","ngModelChange"],["value","Performance"],["value","Rehearsal"],["size","12",4,"ngIf"],["id","detailsInput","type","text","inputmode","description",3,"ngModel","ngModelChange"],[3,"writeMap","chosenLocation"],["presentation","date-time","size","cover","max","2099",3,"value","min","ionChange"],["datetime",""],[4,"ngIf"],["fill","solid","color","primary",1,"ion-float-end",3,"click"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["lines","none"],[1,"listHeader"],["size","2"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],["color","light",1,"pieceCard"],[3,"ionChange"],["name","trash"],[4,"ngFor","ngForOf"]],template:function(n,t){if(1&n){const r=e.EpF();e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"h2"),e._uU(3,"Add Event"),e.qZA(),e.TgZ(4,"h5"),e._uU(5),e.qZA(),e.TgZ(6,"ion-button",1),e.NdJ("click",function(){return t.handleButtonClick()}),e._UZ(7,"ion-icon",2),e.qZA()()(),e.TgZ(8,"ion-content",3)(9,"ion-grid",4)(10,"div",5)(11,"ion-row")(12,"ion-col",6)(13,"h2"),e._uU(14,"Image"),e.qZA(),e.TgZ(15,"p"),e._uU(16,"Add an image for the event"),e.qZA(),e.TgZ(17,"input",7),e.NdJ("change",function(c){return t.handleFileSelect(c)}),e.qZA()(),e.TgZ(18,"ion-col",8),e._UZ(19,"img",9),e.qZA()()(),e.TgZ(20,"div",5)(21,"ion-row")(22,"ion-col",10)(23,"h2"),e._uU(24,"Details"),e.qZA(),e.TgZ(25,"p"),e._uU(26,"What is the event about?"),e.qZA()(),e.TgZ(27,"ion-col",11)(28,"ion-item",12)(29,"ion-label",13),e._uU(30,"Name"),e.qZA(),e.TgZ(31,"ion-input",14),e.NdJ("ngModelChange",function(c){return t.newEvent.name=c}),e.qZA()()(),e.TgZ(32,"ion-col",11)(33,"ion-item")(34,"ion-label",13),e._uU(35,"Type"),e.qZA(),e.TgZ(36,"ion-select",15),e.NdJ("ngModelChange",function(c){return t.newEvent.type=c}),e.TgZ(37,"ion-select-option",16),e._uU(38,"Performance"),e.qZA(),e.TgZ(39,"ion-select-option",17),e._uU(40,"Rehearsal"),e.qZA()()()()(),e.TgZ(41,"ion-row"),e.YNc(42,p,8,2,"ion-col",18),e.qZA(),e.TgZ(43,"ion-row")(44,"ion-col",10)(45,"ion-item",12)(46,"ion-label",13),e._uU(47,"Details"),e.qZA(),e.TgZ(48,"ion-input",19),e.NdJ("ngModelChange",function(c){return t.newEvent.description=c}),e.qZA()()()()(),e.TgZ(49,"div",5)(50,"ion-row")(51,"ion-col",10)(52,"h2"),e._uU(53,"Location"),e.qZA(),e.TgZ(54,"p"),e._uU(55,"Where will the event take place?"),e.qZA(),e.TgZ(56,"app-map",20),e.NdJ("chosenLocation",function(c){return t.getLocation(c)}),e.qZA()()()(),e.TgZ(57,"div",5)(58,"ion-row")(59,"ion-col",10)(60,"h2"),e._uU(61,"Date"),e.qZA(),e.TgZ(62,"p"),e._uU(63,"When will the event occur?"),e.qZA(),e.TgZ(64,"ion-datetime",21,22),e.NdJ("ionChange",function(){e.CHM(r);const c=e.MAs(65);return t.dateChanged(c.value)}),e.qZA()()()(),e.TgZ(66,"div",5)(67,"ion-row")(68,"ion-col",10)(69,"h2"),e._uU(70,"Programm"),e.qZA(),e.TgZ(71,"p"),e._uU(72,"Which Scores will be played?"),e.qZA()()(),e.YNc(73,T,15,1,"ion-row",23),e.YNc(74,A,15,1,"ion-row",23),e.qZA(),e.TgZ(75,"ion-row")(76,"ion-col",10)(77,"ion-button",24),e.NdJ("click",function(){return t.save()}),e._uU(78,"Create Event"),e.qZA()()()()()}2&n&&(e.xp6(5),e.hij("",t.hasEnsemble?"Create a new event for "+t.ensembleName:"Create new event"," "),e.xp6(3),e.Q6J("fullscreen",!0),e.xp6(11),e.s9C("src",t.imageSource,e.LSH),e.xp6(12),e.Q6J("ngModel",t.newEvent.name),e.xp6(5),e.Q6J("ngModel",t.newEvent.type),e.xp6(6),e.Q6J("ngIf",!t.hasEnsemble),e.xp6(6),e.Q6J("ngModel",t.newEvent.description),e.xp6(8),e.Q6J("writeMap",!0),e.xp6(8),e.Q6J("value",t.dateValue)("min",t.currentYear),e.xp6(9),e.Q6J("ngIf",t.hasEnsemble),e.xp6(1),e.Q6J("ngIf",!t.hasEnsemble))},directives:[o.Gu,o.sr,o.YG,o.gu,o.W2,o.jY,o.Nd,o.wI,o.Ie,o.Q$,o.pK,o.j9,v.JJ,v.On,o.t9,o.QI,o.n0,E.O5,E.sg,g.G,o.x4,o.q_,o.td,o.YI,d.rH,o.PM,o.FN,o.nz,o.w,o.IK,o.u8],styles:["ion-header[_ngcontent-%COMP%]{color:#d7e2ff}.eventFields[_ngcontent-%COMP%]{padding:2rem}.eventFields[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-radius:20px}.eventFields[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){padding-left:.8rem;background-color:#fff}.eventFields[_ngcontent-%COMP%]   .newEventSection[_ngcontent-%COMP%]{background-color:var(--ion-color-primary-light);margin-top:1rem;border-radius:var(--card-border);padding:.5rem}ion-col[_ngcontent-%COMP%]{padding:0 1rem 1rem}#detailsInput[_ngcontent-%COMP%]{min-height:6rem}h2[_ngcontent-%COMP%]{font-weight:600}h2[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:var(--ion-color-text)}ion-button[_ngcontent-%COMP%]{margin-top:1rem}img[_ngcontent-%COMP%]{max-width:76%}"]}),i})()}}]);